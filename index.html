<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Pumpkin Status</title>
<style>
  :root {
    --bg-up: #ff8a00;
    --bg-down: #111;
    --fg-up: #1a1a1a;
    --fg-down: #eee;
  }

  html, body {
    height: 100%;
  }

  body {
    margin: 0;
    display: grid;
    place-items: center;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
    background: var(--bg-down);
    color: var(--fg-down);
    transition: background-color .4s ease, color .4s ease;
  }

  .wrap {
    text-align: center;
    padding: 2rem;
  }

  .status {
    font-size: clamp(48px, 6vw, 96px);
    margin: 0.25rem 0 0.5rem;
  }

  .time {
    opacity: .8;
    font-size: clamp(14px, 2.2vw, 18px);
  }

  /* Pumpkin ‚Äúemoji as art‚Äù */
  .pumpkin {
    font-size: clamp(120px, 22vw, 280px);
    line-height: 1;
    display: inline-block;
    filter: drop-shadow(0 8px 24px rgba(0,0,0,.35));
    will-change: transform, filter;
  }

  /* UP animation: gentle float + pulse glow */
  @keyframes floaty {
    0%   { transform: translateY(0px) rotate(-0.5deg); }
    50%  { transform: translateY(-10px) rotate(0.5deg); }
    100% { transform: translateY(0px) rotate(-0.5deg); }
  }
  @keyframes glow {
    0%,100% { text-shadow: 0 0 12px rgba(255,233,160,.55), 0 0 36px rgba(255,165,0,.35); }
    50%     { text-shadow: 0 0 22px rgba(255,233,160,.85), 0 0 48px rgba(255,165,0,.55); }
  }

  /* DOWN animation: a little squash & ‚ÄúZzz‚Äù drift */
  @keyframes sleepy {
    0%   { transform: translateY(0) scale(1); }
    40%  { transform: translateY(6px) scale(0.98, 0.96); }
    100% { transform: translateY(0) scale(1); }
  }
  @keyframes zfloat {
    0%   { opacity: 0; transform: translateY(8px) scale(0.9); }
    10%  { opacity: .9; }
    100% { opacity: 0; transform: translateY(-40px) scale(1.1); }
  }

  /* Decorative Zs */
  .zz {
    position: absolute;
    left: 55%;
    top: 35%;
    font-size: clamp(24px, 4vw, 36px);
    opacity: 0;
    pointer-events: none;
  }
  .zz.z1 { animation: zfloat 3.2s linear infinite; }
  .zz.z2 { animation: zfloat 3.2s linear infinite 1.1s; left: 60%; top: 30%; }
  .zz.z3 { animation: zfloat 3.2s linear infinite 2.2s; left: 50%; top: 33%; }

  /* States */
  .is-up body, body.is-up { background: var(--bg-up); color: var(--fg-up); }
  body.is-up .pumpkin { animation: floaty 3.6s ease-in-out infinite, glow 2.6s ease-in-out infinite; }
  body.is-up .status { content: "UP"; }
  body.is-down .pumpkin { animation: sleepy 2.8s ease-in-out infinite; }
  body.is-down .zz { display: block; }

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .pumpkin, .zz { animation: none !important; }
  }

  /* Tiny helper badge */
  .badge {
    position: fixed; bottom: 10px; right: 12px;
    opacity: .6; font-size: 12px;
  }
</style>
</head>
<body class="is-down">
  <div class="wrap">
    <div style="position:relative; display:inline-block;">
      <div class="pumpkin" aria-hidden="true">üéÉ</div>
      <div class="zz z1">Z</div>
      <div class="zz z2">Z</div>
      <div class="zz z3">Z</div>
    </div>
    <h1 id="status" class="status">Loading‚Ä¶</h1>
    <div id="timestamp" class="time"></div>
  </div>
  <div class="badge" id="badge">pumpkin-status</div>

<script>
(async function() {
  const body = document.body;
  const statusEl = document.getElementById('status');
  const tsEl = document.getElementById('timestamp');

  try {
    const res = await fetch('status.json?_=' + Date.now(), { cache: 'no-store' });
    const data = await res.json();
    const up = !!data.up;

    body.classList.toggle('is-up', up);
    body.classList.toggle('is-down', !up);
    statusEl.textContent = up ? 'üéÉ UP!' : 'üí§ DOWN‚Ä¶';

    // Timestamp display (fallback if missing)
    const ts = data.timestamp ? new Date(data.timestamp) : new Date();
    tsEl.textContent = 'Last updated: ' + ts.toLocaleString();

  } catch (e) {
    statusEl.textContent = '‚ùì Unknown';
    tsEl.textContent = 'Could not load status.json';
  }
})();
</script>
</body>
</html>
